---
title: "如何判断主机是物理服务器还是虚拟机"                         
author: "博文"   
date: 2023-06-15        
comments: true  
tags : [                                    
     "系统安装",
 ]
categories : [                              
     "Linux云计算",
 ]
---
拿到一台服务器，想知道是物理服务器还是虚拟机。我一开始的判断，是看配置。比如我看到这台服务器配置是100G内存，sda，sdb盘200T之类的配置。大概率是物理服务器了。
## 根据配置判断
---
查看内存
```bash
free -h
free -m
```
查看磁盘
```bash
lsblk
df -h
```

事实上这种方式也是不大准确的。万一人家真的是土豪，就用那么高配置的虚拟机呢。更准确的可以看cpu。
## 根据cpu信息判断
---
```bash
lscpu
```
lscpu命令从sysfs、/proc/cpuinfo、或者某些适用于特定架构的库中收集数据。命令的输出会以人类易读的方式展示如下信息：cpu、线程、核心、插槽和Non-Uniform MemoryAccess (NUMA)节点的数量，也有cpu共享缓存，cpu的族号，运行模式，处理指令的速度，大小端，步进等信息

在虚拟环境下，系统架构信息展示映射着客户操作系统的设置，这和物理主机是有明显差异的。在架构上支持检索物理拓扑信息，lscpu命令也显示主机系统中的物理插槽数量，芯片，内核数。

所以这条命令是可以准确判断是物理服务器还是虚拟机了。

##  systemd-detect-virt 命令判断
```bash
[root@node ~]# systemd-detect-virt
vmware

```
如果返回none，则为物理机。上面的就是VMware虚拟机。

## dmidecode命令
---
```bash
dmidecode -t system
dmidecode -s system-product-name
```